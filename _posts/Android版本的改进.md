硬件渲染（黄油计划）
===

**Android 4.1：黄油计划**
为了确保一致的帧数，Android 4.1系统通过系统框架进行的**渲染和动画都将采用垂直同步**（vsync）的方式。一切都遵循16毫秒的循环周期，包括应用的渲染、触摸动作、画面构图和现实刷新等等，因此不会有任何帧数提前或滞后。

Android 4.1还在图形管线中加入了**三重缓冲**，让滚动和翻页等动作变的更一致更顺滑。

Android 4.1不仅仅通过垂直同步来降低触摸反应的延迟，还会在屏幕刷新的时候预判你的手指下一次触摸的位置。这会使触摸操作变得更加灵敏和一致。此外在闲置期间，Android系统会在下一次触摸发生时让CPU输入升压，以确保没有延迟。”

**Android 4.4：对齐唤醒**

其实，很多时候，安卓系统的卡顿并不是由系统本身造成的，而是由于安卓开放的特性例如对第三方APP限制较少，所以很多APP长期恶意在后台运行，定期唤醒系统，随着安装的APP越来越多，各种APP会一窝蜂地唤醒系统，而每次唤醒都会让CPU处于高负荷运转状态，导致手机待机时也非常耗电。

而4.4版本很明显的针对这个问题而做出了优化，在该版本中加入了对齐唤醒功能，把原来需要分别在不同时间唤醒系统的多个APP集中在某个时间一次性唤醒。这样，系统被唤醒的次数大幅减少，CPU也不用频繁的工作，手机也就不会这么卡顿和耗电了。

**Android 5.0：ART虚拟机**

一直以来，Dalvik虚拟机背负着Android应用卡顿的罪名，原因则是应用在运行的过程中，虚拟机Dalvik通过一个叫JIT（Just-in-time）的解释器动态的进行编译并执行，这一过程也拖慢了运行效率。而在5.0版本中，原有的Dalvik虚拟机被新的ART虚拟机代替。

Android Runtime（缩写为 ART），是一种在Android操作系统上的运行环境，由Google公司研发。ART能够把**应用程序的字节码转换为机器码**，是Android所使用的一种新的虚拟机。它与Dalvik的主要不同在于：Dalvik采用的是JIT技术，而ART采用Ahead-of-time（AOT）技术，也就是**预编译技术**，安装应用的时候，代码中的字节码将被编译成机器码。

而由于有了机器码，下次打开的时候就不需要再编译了，这就提高了运行效率，APP启动速度明显加快。ART同时也**改善了性能、垃圾回收(Garbage Collection)、提高续航能力、应用程序除错以及性能分析**。

**Android 6.0：Doze嗜睡模式**

4.4的对齐唤醒已经对后台APP做出了一定限制，但是显然对于那些“毒瘤APP”显然是不够的，为了杜绝“毒瘤”APP不断在后台消耗资源和电量，**6.0版本加入了Doze嗜睡模式，在Doze模式中，系统尝试去通过减少应用的网络访问和CPU敏感的服务来保护电池。它也阻止应用通过访问网络，并且延缓应用的任务、同步和标准alarms**。

同时系统定期退出Doze模式（maintenance window）去让app完成他们被延缓的动作。在maintenance window期间，系统运行所有挂起的同步、任务和alarms，同时也能访问网络。只要用户通过移动、点亮屏幕或则插上充电器唤醒设备的时候，系统会退出Doze模式，所有的APP退回到正常活动状态。

**Android 7.0：优化系统代码**

如果说前几代Android是在改善应用环境，提升应用体验的话，那么7.0版本就是优化Android的运行环境了，谷歌表示，7.0版本会是最具销量的一代Android操作系统，7.0版本主要通过减少代码的形式来提升运行速度，Android N的代码减少了50%，新的代码减少50%，软件运行速度提升幅度达到600%，应用安装提速75%。

自从Android5.0换了ART虚拟机开始，因为安装时要对大量的代码进行预编译，应用安装速度一直被用户诟病，Google终于在Android7.0上解决了这一问题。

此外，7.0版本另一个优化是，**每次手机升级完系统之后不用等待漫长的应用优化过程，直接就可以进入系统**。

**Android 8.0：针对低配设备的Android Go，系统/应用启动优化**

8.0相对前几个版本而言，没有特别大的提升，毕竟Android已经第十个年头了，发展已经非常的成熟。8.0版本主要是细节的优化和体验的提升。

8.0版本加入了TensorFlow Lite技术，可以帮助低功耗设备跟上当今高强度任务处理，利用新的神经网络API帮助底层芯片加速数据处理。这一功能有助于为下一代在线设备提高语音处理，视觉搜索，增强现实等能力。简而言之，就是一个内置在系统的机器学习工具。

**同时，8.0版本还针对应用启动的进程进行优化，包括并发进程、压缩收集的垃圾信息和代码区域等。此外还有针对后台服务的限制，防止应用程序在后台运行太久。目标是大大减少电池消耗。**

另外，针对配置较低的移动设备，谷歌还推出了Android Go的系统，它不是一个独立分支的Android版本，而是隶属于Android O，可以用于1GB RAM的设备上，例如为了节省性能，原来系统中吃内存的过渡动画被砍掉，同时还针对Android Go开发适配版应用，比如Youtube Go。

**如果你认为这个系统只是做减法，那你就错了，在有些方面，谷歌甚至还为Android Go添加了功能，比如数据管理，这个对低端机来说十分重要，谷歌会将这个功能添加到快捷设置中。该系统预计2018年正式面世。**
